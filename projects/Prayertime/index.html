<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Prayer Times UI (Black)</title>

  <style>
    :root{
      /* FULL BLACK THEME */
      --bg:#060606;
      --surface:#0f0f10;
      --surface2:#131314;
      --glass: rgba(255,255,255,.08);
      --glass2: rgba(0,0,0,.35);
      --border: rgba(255,255,255,.12);

      --text: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.68);
      --muted2: rgba(255,255,255,.55);

      --accent: #e07a5f; /* countdown */
      --accentSoft: rgba(224,122,95,.22);

      --radiusXL: 24px;
      --radiusLG: 18px;
      --radiusMD: 14px;

      --shadow: 0 22px 70px rgba(0,0,0,.55);
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: system-ui,-apple-system,Segoe UI,Roboto,Arial;
      color:var(--text);
      background: var(--bg);
      display:flex;
      justify-content:center;
    }

    /* Phone frame preview (optional, looks like the screenshot) */
    .phone{
      width:min(430px,100%);
      min-height:100vh;
      background: var(--bg);
      position:relative;
      overflow:hidden;
    }

    /* ===== HERO (background image goes here later) ===== */
    .hero{
      position:relative;
      padding:18px 16px 14px;
      height: 360px;
      overflow:hidden;
    }

    /* Replace this later with your background image:
       e.g. set background-image: url('your.jpg'); */
    .heroBg{
      position:absolute; inset:0;
      background:
        linear-gradient(180deg, rgba(0,0,0,.20) 0%, rgba(0,0,0,.55) 55%, rgba(0,0,0,.82) 100%),
        radial-gradient(700px 340px at 60% 10%, rgba(60,120,255,.25), transparent 55%),
        radial-gradient(520px 260px at 15% 50%, rgba(0,255,200,.10), transparent 60%),
        linear-gradient(180deg, #0b0f1a, #070707);
      filter:saturate(1.05) contrast(1.05);
      transform: scale(1.03);
    }

    /* dark overlay like the screenshot */
    .heroOverlay{
      position:absolute; inset:0;
      background: linear-gradient(180deg, rgba(0,0,0,.18), rgba(0,0,0,.70) 70%, rgba(0,0,0,.88));
      pointer-events:none;
    }

    .heroContent{
      position:relative;
      z-index:2;
      height:100%;
      display:flex;
      flex-direction:column;
      gap:18px;
    }

    /* Header row */
    .topBar{
      display:grid;
      grid-template-columns: 1fr auto 1fr;
      align-items:center;
      gap:10px;
      padding-top:4px;
    }

    .brand{
      display:flex; align-items:center; gap:10px;
      opacity:.95;
    }
    .brand .logo{
      width:42px; height:42px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.18);
      background: rgba(0,0,0,.20);
      display:grid; place-items:center;
      font-weight:800;
      letter-spacing:.4px;
    }
    .brand .logo small{opacity:.7; font-weight:700}
    .appName{
      font-family: ui-serif, Georgia, "Times New Roman", serif;
      letter-spacing: 2px;
      font-size: 26px;
      opacity:.92;
    }

    .icons{
      display:flex; justify-content:flex-end; gap:14px;
      opacity:.95;
    }
    .iconBtn{
      width:38px; height:38px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.18);
      display:grid; place-items:center;
      cursor:pointer;
    }
    .iconBtn svg{width:18px;height:18px; opacity:.9}

    /* Date/time */
    .dateLine{
      margin-top:8px;
      font-family: ui-serif, Georgia, "Times New Roman", serif;
      font-size: 30px;
      opacity:.92;
      text-shadow: 0 10px 30px rgba(0,0,0,.55);
    }
    .clock{
      font-family: ui-serif, Georgia, "Times New Roman", serif;
      font-size: 64px;
      line-height:1;
      opacity:.98;
      text-shadow: 0 14px 40px rgba(0,0,0,.60);
    }

    .nextRow{
      margin-top:4px;
      display:flex; align-items:center; gap:12px; flex-wrap:wrap;
      font-family: ui-serif, Georgia, "Times New Roman", serif;
      font-size: 30px;
      opacity:.95;
    }

    .pill{
      margin-left:6px;
      padding:12px 18px;
      border-radius: 14px;
      background: var(--accent);
      color: rgba(255,255,255,.95);
      font-weight:800;
      letter-spacing:.5px;
      box-shadow: 0 18px 40px rgba(224,122,95,.22);
      border: 1px solid rgba(255,255,255,.18);
      font-family: system-ui,-apple-system,Segoe UI,Roboto,Arial;
      font-size: 26px;
    }

    /* ===== Prayer horizontal bar (like screenshot) ===== */
    .prayerBarWrap{
      margin-top:auto;
      padding-bottom: 6px;
    }

    .prayerBar{
      border-radius: 22px;
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.18);
      box-shadow: 0 20px 60px rgba(0,0,0,.50);
      padding: 14px 10px 12px;
      overflow-x:auto;
      -webkit-overflow-scrolling: touch;
      display:flex;
      gap:18px;
      scrollbar-width:none;
    }
    .prayerBar::-webkit-scrollbar{display:none}

    .pItem{
      min-width: 88px;
      text-align:center;
      padding: 8px 8px 10px;
      border-radius: 16px;
      border: 1px solid transparent;
      color: rgba(255,255,255,.90);
    }
    .pItem.active{
      background: rgba(224,122,95,.14);
      border-color: rgba(224,122,95,.55);
      box-shadow: 0 18px 40px rgba(224,122,95,.10);
    }
    .pName{
      font-family: ui-serif, Georgia, "Times New Roman", serif;
      font-size: 22px;
      margin-bottom:8px;
      opacity:.95;
    }

    .pIcon{
      width:34px; height:34px;
      margin: 0 auto 8px;
      display:grid; place-items:center;
      opacity:.9;
    }
    .pIcon svg{width:34px;height:34px}
    .pTime{
      font-size: 18px;
      font-weight:700;
      opacity:.95;
    }
    .pMeta{
      margin-top:3px;
      font-size: 14px;
      color: var(--muted2);
    }

    /* ===== Main content (cards grid) ===== */
    .content{
      padding: 14px 14px 94px;
      background: var(--bg);
    }

    .grid{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 12px;
    }

    .tile{
      background: var(--surface);
      border: 1px solid rgba(255,255,255,.10);
      border-radius: 18px;
      padding: 14px 10px 16px;
      box-shadow: 0 18px 55px rgba(0,0,0,.55);
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      gap: 12px;
      min-height: 124px;
    }
    .tile .tIcon{
      width:60px;height:60px;
      border-radius: 18px;
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.12);
      display:grid; place-items:center;
    }
    .tile .tIcon svg{width:34px;height:34px;opacity:.95}
    .tile .tLabel{
      font-family: ui-serif, Georgia, "Times New Roman", serif;
      font-size: 26px;
      opacity:.93;
    }

    /* ===== Section header like screenshot ===== */
    .sectionRow{
      margin-top:18px;
      display:flex;
      justify-content:space-between;
      align-items:flex-end;
      gap:12px;
    }
    .sectionTitle{
      font-family: ui-serif, Georgia, "Times New Roman", serif;
      font-size: 30px;
      opacity:.92;
    }
    .sectionLink{
      font-size: 18px;
      color: rgba(120,200,255,.88);
      opacity:.95;
      cursor:pointer;
    }

    /* Lesson card */
    .lessonCard{
      margin-top:10px;
      background: var(--surface2);
      border: 1px solid rgba(255,255,255,.10);
      border-radius: 18px;
      overflow:hidden;
      box-shadow: 0 18px 55px rgba(0,0,0,.55);
      display:grid;
      grid-template-columns: 104px 1fr;
      gap: 0;
      min-height: 120px;
    }
    .lessonImg{
      background:
        linear-gradient(180deg, rgba(0,0,0,.10), rgba(0,0,0,.55)),
        radial-gradient(120px 80px at 40% 30%, rgba(255,255,255,.10), transparent 60%),
        linear-gradient(180deg, #2a2a2a, #161616);
      border-right: 1px solid rgba(255,255,255,.08);
    }
    .lessonBody{padding:12px 12px 12px}
    .lessonTitle{
      font-family: ui-serif, Georgia, "Times New Roman", serif;
      font-size: 24px;
      line-height:1.15;
      margin: 4px 0 8px;
      opacity:.95;
    }
    .lessonMeta{
      color: var(--muted);
      font-size: 16px;
      line-height:1.35;
    }

    /* ===== Bottom navigation (like screenshot) ===== */
    .bottomNav{
      position:fixed;
      left:50%;
      transform:translateX(-50%);
      bottom:0;
      width:min(430px,100%);
      background: rgba(10,10,10,.92);
      border-top: 1px solid rgba(255,255,255,.10);
      backdrop-filter: blur(10px);
      padding: 10px 14px 12px;
      display:flex;
      justify-content:space-around;
      gap: 10px;
      z-index:5;
    }
    .navItem{
      display:flex;
      flex-direction:column;
      align-items:center;
      gap: 6px;
      color: rgba(255,255,255,.70);
      font-size: 12px;
      min-width: 60px;
    }
    .navItem.active{color: rgba(120,200,255,.95)}
    .navIcon{
      width:38px;height:38px;
      border-radius:999px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.05);
      display:grid; place-items:center;
    }
    .navIcon svg{width:18px;height:18px;opacity:.9}
  </style>
</head>

<body>
  <div class="phone">
    <!-- HERO -->
    <section class="hero">
      <div class="heroBg" id="heroBg"></div>
      <div class="heroOverlay"></div>

      <div class="heroContent">
        <div class="topBar">
          <div class="brand">
            <div class="logo">izdb<small>.</small></div>
          </div>

          <div class="appName">IZDB</div>

          <div class="icons">
            <button class="iconBtn" title="Notifications">
              <!-- bell -->
              <svg viewBox="0 0 24 24" fill="none">
                <path d="M12 22a2.5 2.5 0 0 0 2.45-2h-4.9A2.5 2.5 0 0 0 12 22Z" stroke="currentColor" stroke-width="1.8"/>
                <path d="M18 16v-5a6 6 0 1 0-12 0v5l-2 2h16l-2-2Z" stroke="currentColor" stroke-width="1.8" stroke-linejoin="round"/>
              </svg>
            </button>
            <button class="iconBtn" title="Menu">
              <!-- menu -->
              <svg viewBox="0 0 24 24" fill="none">
                <path d="M4 7h16M4 12h16M4 17h16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              </svg>
            </button>
          </div>
        </div>

        <div>
          <div class="dateLine" id="hijriLine">20 Sha'ban 1447</div>
          <div class="clock" id="clock">16:19:30</div>

          <div class="nextRow">
            <span id="nextText">Maghrib begins in</span>
            <span class="pill" id="countdown">00:51:30</span>
          </div>
        </div>

        <!-- Prayer bar -->
        <div class="prayerBarWrap">
          <div class="prayerBar" id="prayerBar">
            <!-- items inserted by JS -->
          </div>
        </div>
      </div>
    </section>

    <!-- CONTENT -->
    <main class="content">
      <div class="grid">
        <div class="tile" data-action="quran">
          <div class="tIcon" aria-hidden="true">
            <!-- book -->
            <svg viewBox="0 0 24 24" fill="none">
              <path d="M4 5.5c0-1.1.9-2 2-2h11c1.1 0 2 .9 2 2V19c0 1.1-.9 2-2 2H6c-1.1 0-2-.9-2-2V5.5Z" stroke="currentColor" stroke-width="1.8"/>
              <path d="M8 7h8M8 10h8M8 13h6" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
            </svg>
          </div>
          <div class="tLabel">Quran</div>
        </div>

        <div class="tile" data-action="prayers">
          <div class="tIcon">
            <!-- mosque -->
            <svg viewBox="0 0 24 24" fill="none">
              <path d="M12 4c2.7 2.2 4 4.3 4 6.5V20H8V10.5C8 8.3 9.3 6.2 12 4Z" stroke="currentColor" stroke-width="1.8" />
              <path d="M6 20h12" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
              <path d="M12 10v10" stroke="currentColor" stroke-width="1.8" opacity=".7"/>
            </svg>
          </div>
          <div class="tLabel">Gebetszeiten</div>
        </div>

        <div class="tile" data-action="qibla">
          <div class="tIcon">
            <!-- compass -->
            <svg viewBox="0 0 24 24" fill="none">
              <path d="M12 21a9 9 0 1 0 0-18 9 9 0 0 0 0 18Z" stroke="currentColor" stroke-width="1.8"/>
              <path d="M14.8 9.2 13 13l-3.8 1.8L11 11l3.8-1.8Z" stroke="currentColor" stroke-width="1.8" stroke-linejoin="round"/>
            </svg>
          </div>
          <div class="tLabel">Qibla</div>
        </div>

        <div class="tile" data-action="dua">
          <div class="tIcon">
            <!-- beads -->
            <svg viewBox="0 0 24 24" fill="none">
              <path d="M7 6c2-2 6-2 8 0M9 20c-3-2-3-8 0-10m6 0c3 2 3 8 0 10" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
              <circle cx="12" cy="12" r="2.2" stroke="currentColor" stroke-width="1.8"/>
            </svg>
          </div>
          <div class="tLabel">Bittgebete</div>
        </div>

        <div class="tile" data-action="donate">
          <div class="tIcon">
            <!-- hand coin -->
            <svg viewBox="0 0 24 24" fill="none">
              <path d="M12 7a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" stroke="currentColor" stroke-width="1.8"/>
              <path d="M3 16h7l3-2.2c.8-.6 2-.4 2.5.5.5.9.2 2-.7 2.5L12 20H7c-2.2 0-4-1.8-4-4Z" stroke="currentColor" stroke-width="1.8" stroke-linejoin="round"/>
              <path d="M14 12h4a3 3 0 0 1 0 6h-6" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
            </svg>
          </div>
          <div class="tLabel">Spenden</div>
        </div>

        <div class="tile" data-action="videos">
          <div class="tIcon">
            <!-- play -->
            <svg viewBox="0 0 24 24" fill="none">
              <path d="M4 7c0-1.1.9-2 2-2h12c1.1 0 2 .9 2 2v10c0 1.1-.9 2-2 2H6c-1.1 0-2-.9-2-2V7Z" stroke="currentColor" stroke-width="1.8"/>
              <path d="M11 10.2v3.6c0 .7.8 1.1 1.4.7l3-1.8c.6-.4.6-1.1 0-1.5l-3-1.8c-.6-.4-1.4 0-1.4.8Z" fill="currentColor" opacity=".9"/>
            </svg>
          </div>
          <div class="tLabel">Videos</div>
        </div>
      </div>

      <div class="sectionRow">
        <div class="sectionTitle">Nächster Unterricht</div>
        <div class="sectionLink">Wöchentliches Programm</div>
      </div>

      <div class="lessonCard">
        <div class="lessonImg"></div>
        <div class="lessonBody">
          <div class="lessonTitle">40 Hadithe von Imam an-Nawa…</div>
          <div class="lessonMeta">Mit Sheikh Mohamed Mater<br/>Heute • 06:00 PM</div>
        </div>
      </div>
    </main>

    <!-- Bottom nav -->
    <nav class="bottomNav" aria-label="Bottom navigation">
      <div class="navItem active">
        <div class="navIcon">
          <!-- home -->
          <svg viewBox="0 0 24 24" fill="none">
            <path d="M4 10.5 12 4l8 6.5V20a1.5 1.5 0 0 1-1.5 1.5H5.5A1.5 1.5 0 0 1 4 20v-9.5Z" stroke="currentColor" stroke-width="1.8" stroke-linejoin="round"/>
          </svg>
        </div>
        Home
      </div>

      <div class="navItem">
        <div class="navIcon">
          <!-- calendar -->
          <svg viewBox="0 0 24 24" fill="none">
            <path d="M7 3v3M17 3v3" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            <path d="M5 7h14M6 5h12a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2Z" stroke="currentColor" stroke-width="1.8"/>
          </svg>
        </div>
        Termine
      </div>

      <div class="navItem">
        <div class="navIcon">
          <!-- book -->
          <svg viewBox="0 0 24 24" fill="none">
            <path d="M6 4h11a2 2 0 0 1 2 2v14H8a2 2 0 0 0-2 2V4Z" stroke="currentColor" stroke-width="1.8"/>
            <path d="M6 20h11" stroke="currentColor" stroke-width="1.8"/>
          </svg>
        </div>
        Inhalte
      </div>

      <div class="navItem">
        <div class="navIcon">
          <!-- settings -->
          <svg viewBox="0 0 24 24" fill="none">
            <path d="M12 15.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7Z" stroke="currentColor" stroke-width="1.8"/>
            <path d="M19.4 15a7.9 7.9 0 0 0 .1-2l2-1.3-2-3.4-2.4.7a8 8 0 0 0-1.7-1l-.3-2.5H10l-.3 2.5a8 8 0 0 0-1.7 1l-2.4-.7-2 3.4 2 1.3a7.9 7.9 0 0 0 .1 2l-2 1.3 2 3.4 2.4-.7a8 8 0 0 0 1.7 1l.3 2.5h4.2l.3-2.5a8 8 0 0 0 1.7-1l2.4.7 2-3.4-2-1.3Z" stroke="currentColor" stroke-width="1.2" opacity=".8"/>
          </svg>
        </div>
        Einstellungen
      </div>
    </nav>
  </div>

  <script>
    /**
     * DATA + LOGIC
     * - Uses AlAdhan API for prayer times (reliable public API).
     * - Hijri date also from AlAdhan date object.
     *
     * Docs: https://aladhan.com/prayer-times-api
     */

    const PRAYER_ORDER = ["Fajr","Sunrise","Dhuhr","Asr","Maghrib","Isha"];
    const LABELS = {
      Fajr: "Fajr",
      Sunrise: "Shurooq",
      Dhuhr: "Dhuhr",
      Asr: "Asr",
      Maghrib: "Maghrib",
      Isha: "Ishaa",
    };
    const META = {
      Fajr: "Morgens",
      Sunrise: "Morgens",
      Dhuhr: "Morgens",
      Asr: "Abends",
      Maghrib: "Abends",
      Isha: "Abends",
    };

    // Change these defaults if you want
    const CITY = "Berlin";
    const COUNTRY = "Germany";
    const METHOD = 2; // 2 = ISNA (you can change later)

    const el = (id) => document.getElementById(id);

    function pad(n){ return String(n).padStart(2,"0"); }

    function formatTime(d){
      return `${pad(d.getHours())}:${pad(d.getMinutes())}:${pad(d.getSeconds())}`;
    }

    function parseHHMM(hhmm){
      const s = String(hhmm || "").trim();
      // API sometimes returns "05:41 (CET)" -> keep HH:MM
      const core = s.slice(0,5);
      const [h,m] = core.split(":").map(Number);
      return {h, m, core};
    }

    function buildPrayerTimesDateObjects(now, timings){
      const map = {};
      for(const p of PRAYER_ORDER){
        const raw = timings[p];
        const {h,m,core} = parseHHMM(raw);
        const dt = new Date(now);
        dt.setHours(h, m, 0, 0);
        map[p] = { dt, core };
      }
      return map;
    }

    function findNextPrayer(now, dateObjs){
      for(const p of PRAYER_ORDER){
        if(dateObjs[p].dt > now) return p;
      }
      // If all passed, next is tomorrow Fajr
      return "Fajr";
    }

    function diffToHHMMSS(ms){
      const total = Math.max(0, Math.floor(ms/1000));
      const hh = Math.floor(total/3600);
      const mm = Math.floor((total%3600)/60);
      const ss = total%60;
      return `${pad(hh)}:${pad(mm)}:${pad(ss)}`;
    }

    function iconSvgFor(prayer){
      // Simple inline icons (style similar to screenshot)
      if(prayer === "Fajr"){
        return `<svg viewBox="0 0 24 24" fill="none">
          <path d="M7 15a5 5 0 1 1 9.2 2.8A6.5 6.5 0 1 0 7 15Z" fill="currentColor" opacity=".85"/>
          <path d="M4 18h16" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" opacity=".7"/>
        </svg>`;
      }
      if(prayer === "Sunrise"){
        return `<svg viewBox="0 0 24 24" fill="none">
          <path d="M6 15a6 6 0 0 1 12 0" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
          <path d="M12 3v3M5 7l2 2M19 7l-2 2" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" opacity=".85"/>
          <path d="M4 18h16" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" opacity=".7"/>
        </svg>`;
      }
      if(prayer === "Dhuhr"){
        return `<svg viewBox="0 0 24 24" fill="none">
          <circle cx="12" cy="12" r="4.2" stroke="currentColor" stroke-width="1.8"/>
          <path d="M12 2v3M12 19v3M2 12h3M19 12h3" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" opacity=".85"/>
        </svg>`;
      }
      if(prayer === "Asr"){
        return `<svg viewBox="0 0 24 24" fill="none">
          <path d="M7 15a5 5 0 1 1 9 2" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
          <path d="M17 14h4" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" opacity=".8"/>
          <path d="M4 18h16" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" opacity=".7"/>
        </svg>`;
      }
      if(prayer === "Maghrib"){
        return `<svg viewBox="0 0 24 24" fill="none">
          <path d="M5 15a7 7 0 0 0 14 0" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
          <path d="M4 18h16" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" opacity=".7"/>
          <path d="M8 10h8" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" opacity=".8"/>
        </svg>`;
      }
      // Isha
      return `<svg viewBox="0 0 24 24" fill="none">
        <path d="M14.5 2.8a7.8 7.8 0 1 0 6.7 11.7A6.6 6.6 0 0 1 14.5 2.8Z" fill="currentColor" opacity=".85"/>
        <path d="M7 18h10" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" opacity=".7"/>
      </svg>`;
    }

    function renderPrayerBar(timings, activeKey){
      const wrap = el("prayerBar");
      wrap.innerHTML = "";

      for(const key of PRAYER_ORDER){
        const name = LABELS[key];
        const time = String(timings[key] || "--:--").slice(0,5);
        const meta = META[key];

        const item = document.createElement("div");
        item.className = "pItem" + (key === activeKey ? " active" : "");
        item.innerHTML = `
          <div class="pName">${name}</div>
          <div class="pIcon">${iconSvgFor(key)}</div>
          <div class="pTime">${time}</div>
          <div class="pMeta">${meta}</div>
        `;
        wrap.appendChild(item);
      }
    }

    async function fetchTimings(){
      const url = `https://api.aladhan.com/v1/timingsByCity?city=${encodeURIComponent(CITY)}&country=${encodeURIComponent(COUNTRY)}&method=${METHOD}`;
      const res = await fetch(url);
      if(!res.ok) throw new Error("Prayer API error: " + res.status);
      const json = await res.json();
      const data = json?.data;
      const timings = data?.timings || {};
      const hijri = data?.date?.hijri;

      // Hijri line like screenshot
      if(hijri?.day && hijri?.month?.en && hijri?.year){
        const month = hijri.month.en; // e.g. Sha'ban
        el("hijriLine").textContent = `${hijri.day} ${month} ${hijri.year}`;
      }

      return timings;
    }

    let timingsCache = null;

    async function init(){
      try{
        timingsCache = await fetchTimings();
      }catch(e){
        console.warn(e);
        // fallback (so UI still shows)
        timingsCache = {
          Fajr:"05:41", Sunrise:"07:30", Dhuhr:"12:26", Asr:"14:41", Maghrib:"17:11", Isha:"18:47"
        };
      }

      tick();
      setInterval(tick, 1000);
    }

    function tick(){
      const now = new Date();
      el("clock").textContent = formatTime(now);

      if(!timingsCache) return;

      const dateObjs = buildPrayerTimesDateObjects(now, timingsCache);
      let nextKey = findNextPrayer(now, dateObjs);

      // If everything passed today, next is tomorrow Fajr
      let nextDate = dateObjs[nextKey].dt;
      if(nextDate <= now){
        nextDate = new Date(nextDate);
        nextDate.setDate(nextDate.getDate()+1);
      }

      // Update text + countdown
      el("nextText").textContent = `${LABELS[nextKey]} begins in`;
      el("countdown").textContent = diffToHHMMSS(nextDate - now);

      // Highlight in bar (for "tomorrow Fajr" still highlight Fajr)
      renderPrayerBar(timingsCache, nextKey);
    }

    // Background image hook:
    // Later you can do:
     document.getElementById("heroBg").style.backgroundImage = "url('mosque.jpg')";
     document.getElementById("heroBg").style.backgroundSize = "cover";
     document.getElementById("heroBg").style.backgroundPosition = "center";

    init();
  </script>
</body>
</html>
